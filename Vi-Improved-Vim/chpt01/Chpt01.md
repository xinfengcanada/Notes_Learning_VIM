# 基本的编辑

Vim 是世界上最强大的文本编辑器之一，它的高效可以使你以最小的击键数编辑文件。这种能力和功能是有代价的：当开始使用时，你将面临以个陡峭的学习曲线。

本文我和大家分享在编辑文件时用的10个基本命令。本文包括一下内容：

- 四个基本的移动命令
- 如何插入和删除文本
- 如何获取帮助（很重要哦）
- 退出Vim

在你掌握这些命令后，就可以学习更高级的命令了。

## 在你开始之前

如果你还没有安装Vim，你应该首先安装[Vim](https://vim.en.softonic.com/).

如果你用的是Unix操作系统，你应该执行下面的命令：
```
$touch ~/.vimrc
```
创建一个~/.vimrc文件，即是告诉Vim你想在Vim模式下使用。如果这个文件不存在，Vim将会在Vi-compatibility模式下运行，并且你会失去很多Vim的高级功能。但是，你可以随时从内部启用Vim高级功能，用下面的命令：
```
:set nocompatible<Enter>
```

如果你用的是Windows操作系统，安装过程会自动创建此文件:_vimrc。

## 首次运行Vim

键入以下命令：
```
$vim file.txt
```
启动Vim。

需要注意的是，$是Unix默认的命令提示符。
如果你用的是Windows操作系统，打开MS-DOS终端窗口，键入命令：
```
C:>vim file.txt
```

无论以上哪种系统，Vim开始编辑文件名为file.txt文件。因为这是一个新文件，你会得到一个空白的窗口。如图1.1所示。

![图1.1 新建file.txt文件](1.1.gif)

有~的行，表示文件中没有行，换句话说，当Vim新建一个文件时，它会显示~行，并在文件底部显示一条信息指示一个新文件，名为file。

### vim命令

如果你在终端中键入
```
$vim
```

Vim会创建一个临时文件，窗口中的信息也是临时的，当你键入第一个字符时，这是信息会消失。如图1.2所示。

![图1.2 新建临时文件](1.2.gif)

### 模式

Vim编辑器是基于模式的。也就是说不同模式下，会有不同的行为。如果窗口底部显示文件名或空白，则说明你是在普通模式下；如果处于插入模式，窗口底端会显示-- INSERT --；如果处于视图模式，窗口底端会显示-- VISUAL --。


## 首次编辑

如何编辑我的第一个文件？学完这节，你将学到一些基本的编辑命令，并掌握如何进行基本的编辑，速度不快，但是能完成你的任务。俗话说，不怕慢，就怕站。

### 插入文本

要插入文字，你需要切换到插入模式。敲击i，要注意窗口左下方的提示信息：-- INSERT --（出现此信息，说明已处于插入模式了）。

随便键入一些文字，中文、英文等都可以,不用担心会犯错；

以下面的程序员打油诗为例：
```
A very intelligent turtle
         Found programming UNIX a hurdle
         The system,you see,
         Ran as slow as did he.
And that's not saying much for the turtle.
```

完成之后，按ESC退出插入模式，窗口左下角的-- INSERT --提示会消失，Vim就回到了普通模式。如图1.3所示：

![图1.3 插入文本](1.3.gif)


### 摆脱困境

对于新手来说，其中的一个问题是模式混淆，这是由你所出的模式或键入切换模式的命令所引起的。要返回正常的模式，无论什么情况下，请按ESC键。

### 四处移动

回到命令模式后，你可以用以下键四处移动你的光标：h(向左),j(向下),k(向上),l(向右)。起初，这些命令可能是随机选择的。毕竟，谁听说过将j用做向右键？但实际上，这些选择有一个很好的理由：在编辑器中，移动光标是最常见的操作，这些键位位于你右手的基本键位上，这些命令放在你可以最快键入它们的位置。

当然，你也可以使用箭头来移动光标的位置。但是，如果你这样做，你的编辑速度会非常慢，因为要按箭头键，你必须将手从文本键区域移动到箭头区域，因为你可能以一小时要执行数百次移动，这可能需要大量的时间。如果你想有效的编辑，请使用h,j,k,l。

### 删除字符

输入x即可删除光标所在位置的字符。例如，移动光标到至第一行开头，然后输入xxxxxxx（7个x）删除前七个字符，如图1.4所示：

![图1.4 删除字符](1.4.gif)

### 撤销和恢复

撤销命令u和恢复Ctrl+r是一对相反的操作。举个栗子，现在将光标移到行首A位置，键入xxxxxxx删除A young，如图1.5所示：

![图1.5 撤销与恢复](1.5.gif)

有一个特殊版本的恢复命令：U（大写）命令，可以撤销最后一行的所有更改。

### 退出编辑

ZZ(大写Z)命令可以保存并退出文件。

### 放弃更改


有时候，你虽然做了很多更改，但是，最后发现还是之前的版本更好，于是就不想保存现在的更改，这时你就可以强制退出。命令如下：

```
:q!
```
冒号:用于进入命令模式，q是退出，如果你仅仅只键入:q,Vim会显示一个错误信息病拒绝退出：

No write since last change(use ! to override)

最后，你还要按Enter，确认输入。

如图1.6所示：

![图1.6 强制退出](1.6.gif)

## 其他编辑命令

现在你已经掌握了很多基本的命令了，现在可以学习更多复杂的命令了。

### 在一行的结尾插入字符

i命令在光标前插入字符，但是如果你想在一行结尾出插入一些东西呢？这样的话你就需要在光标后面插入字符。这是就可以用到a(追加)命令。

比如，要把下面一行:

and that's not saying much for the turtle.

改成：

and that's not saying much for the turtle!!!

把光标移动到行末的.号上，然后键入x删除.光标此时处于行末的e上，现在键入a!!!<ESC>追加三个感叹号，如图1.7所示：

![图1.7 使用a命令](1.7.gif)

### 删除一行

使用dd命令删除光标所在的一整行。

举个栗子，假如你要删除

The system,you see,

这一行，你可以将光标移动到这一行的任何位置，键入dd,如图1.8所示：

![图1.8 删除一行](1.8.gif)

### 插入新的一行

用o命令，可以在光标所在行下方插入新的一行，O(大写）命令用于在光标所在行上方插入新的一行。

举个栗子，将光标放到第3行，键入o,在其下方插入新的一行；再键入<ESC>k,退出插入模式，将光标移动到上一行，键入O，在Ran as slow as did he.行上方插入新的一行。如图1.9所示:

![图1.9 插入新的一行](1.9.gif)

## 帮助

在本文最后，我们还要分享一个更重要的帮助命令，在Vim中获取帮助，可以键入：
```
:help
```
会出现如图1.10所示界面：

![图1.10 打开Vim帮助系统](1.10.webm)

如果你不指定一个具体的帮助主题，:help会给你呈现一个普通的窗口。Vim开发者对帮助系统做了很聪明的事。他们把帮助窗口当做一个普通的编辑窗口。你可以用普通模式下所有的命令如h,j,k,l等浏览帮助信息。

退出帮助系统，你同样可以使用退出文件命令:ZZ。

![图1.11 浏览帮助信息，退出](1.11.gif)
















